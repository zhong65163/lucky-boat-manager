<!DOCTYPE html>
<html>
<head>
    <title>API Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f0f0f0; }
        .result { background: white; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .success { border-left: 5px solid green; }
        .error { border-left: 5px solid red; }
    </style>
</head>
<body>
    <h1>ğŸ”§ è´¦å·ç®¡ç†ç³»ç»Ÿ API æµ‹è¯•</h1>
    <div id="results"></div>

    <script>
    const results = document.getElementById('results');

    function addResult(title, content, isSuccess = true) {
        const div = document.createElement('div');
        div.className = `result ${isSuccess ? 'success' : 'error'}`;
        div.innerHTML = `<h3>${title}</h3><pre>${JSON.stringify(content, null, 2)}</pre>`;
        results.appendChild(div);
    }

    async function testAPI() {
        try {
            addResult('ğŸš€ å¼€å§‹æµ‹è¯•', { timestamp: new Date().toISOString() });

            // æµ‹è¯•å¥åº·æ£€æŸ¥
            const healthResponse = await fetch('/api/health');
            const healthData = await healthResponse.json();
            addResult(`âœ… å¥åº·æ£€æŸ¥ (${healthResponse.status})`, healthData);

            // æµ‹è¯•ç»Ÿè®¡æ•°æ®
            const statsResponse = await fetch('/api/statistics');
            const statsData = await statsResponse.json();
            addResult(`ğŸ“Š ç»Ÿè®¡æ•°æ® (${statsResponse.status})`, statsData);

            // æµ‹è¯•è´¦å·åˆ—è¡¨
            const accountsResponse = await fetch('/api/accounts');
            const accountsData = await accountsResponse.json();
            addResult(`ğŸ‘¥ è´¦å·åˆ—è¡¨ (${accountsResponse.status})`, {
                status: accountsData.status,
                total: accountsData.total,
                accounts: accountsData.data ? accountsData.data.length : 0,
                first_account: accountsData.data ? accountsData.data[0] : null
            });

        } catch (error) {
            addResult('âŒ æµ‹è¯•å¤±è´¥', { error: error.message }, false);
        }
    }

    // ç«‹å³å¼€å§‹æµ‹è¯•
    testAPI();
    </script>
</body>
</html>